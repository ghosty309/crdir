
import subprocess
import os
import sys

def createDir(name):
    # Make the folder if it doesn't exist
    os.makedirs(name, exist_ok=True)

    # Make a .sh file that CD's into the folder and then auto-destroys himself
    script_name = "cd_into_folder.sh"
    script_content = f"""#!/bin/bash
    # Auto-generated by CrDir
    cd "{name}"
    rm -- ../"$0"
    exec $SHELL
    """

    with open(script_name, "w") as f:
        f.write(script_content)

    os.chmod(script_name, 0o755)

    # Run the script
    subprocess.run([f"./{script_name}"])

if (len(sys.argv) == 2):
    createDir(sys.argv[1])
    sys.exit()

print("""
 ░▒▓██████▓▒░░▒▓███████▓▒░░▒▓███████▓▒░░▒▓█▓▒░▒▓███████▓▒░  
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
░▒▓█▓▒░      ░▒▓███████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓███████▓▒░  
░▒▓█▓▒░      ░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
 ░▒▓██████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓███████▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ 
                                                            
                                                            
CrDir - Create folders, then cd into them.
Made by Ghosty

""")

folderNm = input("Name of the folder to create: ").strip()

if not folderNm:
    print("Folder name cannot be empty.")
    exit(1)

createDir(folderNm)
